(function(e){function t(t){for(var a,s,i=t[0],l=t[1],u=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},o=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"secondary",id:"main-navigation"}},[n("b-navbar-brand",{staticClass:"d-flex align-items-center",attrs:{to:{name:"home"}}},[n("img",{staticClass:"d-inline-block align-top mr-3",attrs:{src:"img/logo.svg",height:"40px",alt:"SGONE"}}),e._v(" SGONE ")]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}})],1),n("b-container",{staticClass:"my-4"},[n("router-view",{key:e.$route.path})],1)],1)},o=[],s=(n("5c0b"),n("2877")),i={},l=Object(s["a"])(i,r,o,!1,null,null,null),u=l.exports,c=n("b85c"),d=n("9483");Object(d["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh."),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then((function(e){var t,n=Object(c["a"])(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.update()}}catch(r){n.e(r)}finally{n.f()}})),setTimeout((function(){window.location.reload(!0)}),1e3)},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var p=n("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-jumbotron",[n("b-row",[n("b-col",{staticClass:"text-center text-sm-right",attrs:{cols:"12",sm:"4",order:"1","order-sm":"2"}},[n("b-img",{attrs:{fluid:"",src:"img/logo.svg"}})],1),n("b-col",{attrs:{cols:"12",sm:"8",order:"2","order-sm":"1"}},[n("h1",{staticClass:"display-3 text-center text-sm-left"},[e._v("SGONE")]),n("p",{staticClass:"lead text-center text-sm-left"},[e._v("Easily identify possible duplicates in your data.")])])],1)],1),e.supportsWorker?[n("b-dropdown",{staticClass:"mb-3",attrs:{text:"Import"}},[n("b-dropdown-item",{on:{click:function(t){return e.$refs.germinateModal.show()}}},[e._v("From Germinate")])],1),n("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[n("b-form-group",{attrs:{label:"Input","label-for":"input"}},[n("b-form-textarea",{attrs:{id:"input",rows:6},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),n("b-row",[n("b-col",{attrs:{cols:"12",sm:"6"}},[n("b-form-group",{attrs:{label:"Id column","label-for":"id-column"}},[n("b-form-select",{attrs:{options:e.columnOptions},scopedSlots:e._u([{key:"first",fn:function(){return[n("b-form-select-option",{attrs:{value:null,disabled:"",id:"id-column"}},[e._v("-- Please select the id column --")])]},proxy:!0}],null,!1,2958346993),model:{value:e.idColumn,callback:function(t){e.idColumn=t},expression:"idColumn"}})],1)],1),n("b-col",{attrs:{cols:"12",sm:"6"}},[n("b-form-group",{attrs:{label:"Name column","label-for":"name-column"}},[n("b-form-select",{attrs:{options:e.columnOptions},scopedSlots:e._u([{key:"first",fn:function(){return[n("b-form-select-option",{attrs:{value:null,disabled:"",id:"name-column"}},[e._v("-- Please select the name column --")])]},proxy:!0}],null,!1,1715487281),model:{value:e.nameColumn,callback:function(t){e.nameColumn=t},expression:"nameColumn"}})],1)],1)],1),e.progress?n("b-progress",{staticClass:"mb-3",attrs:{value:e.progress,variant:"info",striped:"",animated:""}}):e._e(),0===e.progress?n("b-button",{attrs:{type:"submit",disabled:!e.input||!e.idColumn}},[e._v("Go!")]):n("b-button",{on:{click:function(t){return t.preventDefault(),e.cancel.apply(null,arguments)}}},[e._v("Cancel")])],1),e.duplicates&&e.duplicates.length>0?n("b-card",{staticClass:"mt-3",attrs:{"no-body":""}},[n("b-tabs",{attrs:{card:"","content-class":"mt-3","no-fade":""},on:{changed:e.updateIndex},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},e._l(e.duplicates,(function(t,a){return n("b-tab",{key:t.uuid,scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Results "),n("button",{staticClass:"close ml-2",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return t.stopPropagation(),e.deleteTab(a)}}},[e._v("Ã—")])]},proxy:!0}],null,!0)},[n("Results",{attrs:{duplicates:t}})],1)})),1)],1):e._e()]:n("h1",[e._v("Please use a browser that supports Web Workers")]),n("GerminateModal",{ref:"germinateModal",on:{"data-loaded":e.setGerminateData}})],2)},f=[],b=(n("d81d"),n("ac1f"),n("1276"),n("caad"),n("2532"),n("e9c4"),n("a434"),n("5319"),n("d3b7"),n("25f0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"germinateModal",attrs:{title:"Import from Germinate","ok-title":"Import","ok-disabled":!e.canContinue,"cancel-title":"Cancel"},on:{ok:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[n("p",[e._v("You can import germplasm and trait definitions from Germinate to check for duplicates. Enter the Germinate URL and optionally credentials below.")]),n("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[n("b-form-radio-group",{staticClass:"mb-3",attrs:{buttons:"",options:[{text:"Germplasm",value:"germplasm"},{text:"Traits",value:"traits"}],"button-variant":"outline-secondary"},model:{value:e.importType,callback:function(t){e.importType=t},expression:"importType"}}),n("b-form-group",{attrs:{label:"Germinate URL","label-for":"url",description:"The URL of the Germinate you want to request the data from."}},[n("b-form-input",{attrs:{id:"url"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1),n("b-form-group",{attrs:{label:"Requires credentials","label-for":"credentials",description:"Germinate may require login credentials to access the data."}},[n("b-form-radio-group",{staticClass:"mb-3",attrs:{buttons:"",options:[{text:"Yes",value:!0},{text:"No",value:!1}],"button-variant":"outline-secondary",id:"credentials"},model:{value:e.needsCredentials,callback:function(t){e.needsCredentials=t},expression:"needsCredentials"}})],1),e.needsCredentials?[n("b-form-group",{attrs:{label:"Username","label-for":"username"}},[n("b-form-input",{attrs:{id:"username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("b-form-group",{attrs:{label:"Password","label-for":"password"}},[n("b-form-input",{attrs:{id:"password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]:e._e()],2)],1)}),h=[],g=(n("159b"),n("99af"),n("bc3a").default),v={data:function(){return{username:null,password:null,needsCredentials:!1,url:null,token:null,importType:"germplasm"}},computed:{canContinue:function(){return this.url&&(!this.needsCredentials||null!==this.username&&null!==this.password)}},methods:{show:function(e){this.url=null,this.username=null,this.password=null,this.needsCredentials=!1,this.token=null,this.url=e,this.importType="germplasm",this.$refs.germinateModal.show()},hide:function(){var e=this;this.$nextTick((function(){return e.$refs.germinateModal.hide()}))},onSubmit:function(){this.needsCredentials?this.getToken():this.getData()},getToken:function(){var e=this;g({baseURL:this.url,url:"api/token",method:"post",data:{username:this.username,password:this.password}}).then((function(t){t&&t.data&&t.data.token&&(e.token=t.data.token,e.getData())}))},getData:function(){var e=this,t={baseURL:this.url,url:"germplasm"===this.importType?"api/germplasm/table":"api/trait/table",method:"post",headers:{"Content-Type":"application/json; charset=utf-8"},data:{page:0,limit:2147483647}};this.token&&(t.withCredentials=!0,t.headers.Authorization="Bearer ".concat(this.token)),g(t).then((function(t){if(t&&t.data&&t.data.data){var n="id\tname\n";t.data.data.forEach((function(t){"germplasm"===e.importType?n+="".concat(t.germplasmId,"\t").concat(t.germplasmName,"\n"):n+="".concat(t.traitId,"\t").concat(t.traitName,"\n")})),e.$emit("data-loaded",n),e.hide()}}))}}},x=v,y=Object(s["a"])(x,b,h,!1,null,null,null),w=y.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v(e._s(e.duplicates.duplicates.length)+" possible duplicates have been found"),e.duplicates.runtime?[e._v(" in "+e._s(e.duplicates.runtime)+" seconds")]:e._e(),e._v(".")],2),n("b-button",{staticClass:"mb-3",on:{click:function(t){return e.download(e.index)}}},[e._v("Download")]),n("b-table",{attrs:{items:e.duplicates.duplicates,fields:e.columns,responsive:"",striped:"",hover:""},scopedSlots:e._u([{key:"cell(type)",fn:function(t){return[n("b-badge",{attrs:{variant:"exact"===t.value?"success":"warning"}},[e._v(e._s(t.value))])]}}])})],1)},C=[],_={props:{duplicates:{type:Object,default:function(){return[]}}},data:function(){return{columns:[{key:"type",sortable:!0,label:"Match type"},{key:"one.id",sortable:!0},{key:"one.name",sortable:!0},{key:"two.id",sortable:!0},{key:"two.name",sortable:!0}]}}},O=_,j=Object(s["a"])(O,k,C,!1,null,null,null),S=j.exports,T={components:{GerminateModal:w,Results:S},data:function(){return{input:null,progress:0,tabIndex:0,duplicates:[],headers:null,idColumn:null,nameColumn:null}},computed:{supportsWorker:function(){return window.Worker},columnOptions:function(){return this.headers?this.headers.map((function(e){return{value:e,text:e}})):null}},watch:{input:function(e){e?(this.headers=e.split(/\r?\n/)[0].split("\t"),this.idColumn=this.headers.includes("id")?"id":this.headers[0],this.nameColumn=this.headers.includes("name")?"name":this.headers[0]):(this.headers=null,this.idColumn=null,this.nameColumn=null)}},methods:{download:function(e){var t="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(this.duplicates[e].duplicates))),n=document.createElement("a");n.href=t,n.download="sgone.json",n.click()},updateIndex:function(e,t){e.length>=t.length&&(this.tabIndex=e.length-1)},deleteTab:function(e){this.duplicates.splice(e,1)},setGerminateData:function(e){this.input=e},cancel:function(){this.worker&&(this.worker.terminate(),this.progress=0)},onSubmit:function(){var e=this;this.progress=0,this.worker=new Worker("./levenshtein.worker.js");var t=Date.now();this.worker.postMessage({data:this.input.split(/\r?\n/),idColumn:this.idColumn,nameColumn:this.nameColumn}),this.worker.onmessage=function(n){if(n.data)if(n.data.progress)e.progress=n.data.progress;else if(n.data.duplicates){var a=Date.now();e.duplicates.push({uuid:e.uuidv4(),duplicates:n.data.duplicates,runtime:Math.ceil((a-t)/1e3)}),e.progress=0}}},uuidv4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)}))}},mounted:function(){this.$route.query&&this.$route.query.germinateUrl&&this.$refs.germinateModal.show(this.$route.query.germinateUrl)}},G=T,M=(n("cccb"),Object(s["a"])(G,m,f,!1,null,null,null)),I=M.exports;a["a"].use(p["a"]);var $=[{path:"/",name:"home",component:I}],D=new p["a"]({routes:$}),E=D,P=n("2f62");a["a"].use(P["a"]);var N=new P["a"].Store({state:{},mutations:{},actions:{},modules:{}}),R=n("498a"),U=n("7049"),W=n("cbd0"),q=n("1073"),L=n("b1fc"),A=n("a166"),F=n("44d4"),J=n("3d31"),B=n("c015"),Y=n("88d4"),z=n("9ae9"),H=n("f9bc"),K=n("40aa"),Q=n("1f1a"),V=n("521d"),X=n("dbbe"),Z=n("8c60"),ee=n("700c"),te=n("a7e2"),ne=n("bdc5");a["a"].use(R["a"]),a["a"].use(U["a"]),a["a"].use(W["a"]),a["a"].use(q["a"]),a["a"].use(L["a"]),a["a"].use(A["a"]),a["a"].use(F["a"]),a["a"].use(J["a"]),a["a"].use(B["a"]),a["a"].use(Y["a"]),a["a"].use(z["a"]),a["a"].use(H["a"]),a["a"].use(K["a"]),a["a"].use(Q["a"]),a["a"].use(V["a"]),a["a"].use(X["a"]),a["a"].use(Z["a"]),a["a"].use(ee["a"]),a["a"].use(te["a"]),a["a"].use(ne["a"]),a["a"].config.productionTip=!1,new a["a"]({router:E,store:N,render:function(e){return e(u)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"5ced":function(e,t,n){},"9c0c":function(e,t,n){},cccb:function(e,t,n){"use strict";n("5ced")}});
//# sourceMappingURL=app.b303512c.js.map